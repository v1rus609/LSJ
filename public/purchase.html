<!DOCTYPE html>
<html>
<head>
    <title>Purchase History</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <link rel="stylesheet" href="purchase.css">
</head>
<body>
	<div class="container">
		<!-- Navbar -->
		<div class="navbar">
			<a href="index.html" class="home-icon">
                    <img src="home-icon.png" alt="Home" width="32">
			</a>
			<div class="dropdown">
				<button class="dropbtn">
					<img src="menu-icon.png" alt="Menu">
				</button>
				<div class="dropdown-content">
					<a href="container.html">Add Container</a>
					<a href="containers.html">Container List</a>
					<a href="buyers.html">Add Buyer</a>
					<a href="inventory.html">Inventory</a>
					<a href="purchase.html" class="active">Purchase History</a>
					<a href="received-payment.html">Received Payment</a>
					<a href="payment-history.html">Payment History</a>			
					<a href="sales-statement.html"> Sales Statement </a>
					<a href="purchase-return.html"> Purchase Return </a>
					<a href="return-history.html"> Return History </a>
					<a href="buyer-timeline.html"> Buyer Timeline </a>
				</div>
			</div>
		</div>

		<!-- Logo -->
		<div class="logo">
            <img src="logo.png" alt="Company Logo">
        </div>

		<!-- Header -->
		<div class="header">
            <h1>Purchase History</h1>
        </div>

        <!-- Filters -->
        <div class="filters">
            <label for="buyer-filter">Filter by Buyer:</label>
            <select id="buyer-filter">
                <option value="">All Buyers</option>
            </select>

            <label for="container-filter">Filter by Container:</label>
            <select id="container-filter">
                <option value="">All Containers</option>
            </select>
        </div>

        <!-- Purchase Table -->
        <div class="table-container">
            <table id="purchase-table">
                <thead>
                    <tr>
                        <th>SL</th>
                        <th>Date</th>
                        <th>Buyer</th>
                        <th>Container</th>
                        <th>Quantity</th>
                        <th>Rate</th>
                        <th>Paid</th>
                        <th>Unpaid</th>
                        <th>Total Price</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Rows will be dynamically added here -->
                </tbody>
                <tfoot>
                    <tr>
                        <th colspan="6" style="text-align: right">Total</th>
                        <th id="total-paid">0</th>
                        <th id="total-unpaid">0</th>
                        <th id="grand-total">0</th>
                    </tr>
                </tfoot>
            </table>
        </div>

        <!-- Action Buttons -->
        <button id="export-btn" onclick="exportToExcel()">Export to Excel</button>
        <button id="generate-invoice">Invoice</button>
        <button id="generate-all-buyers-invoice">Invoice For All Buyers</button>

        <!-- Edit Form (Popup) -->
        <div class="popup" id="edit-form">
            <div class="popup-content">
                <span class="close-btn" id="close-btn">&times;</span>
                <h2>Edit Purchase</h2>
                <form id="edit-purchase-form">
                    <input type="hidden" id="purchase-id">
                    <label for="purchase-date">Purchase Date:</label>
                    <input type="text" id="purchase-date" required><br>

                    <label for="buyer-name">Buyer:</label>
                    <input type="text" id="buyer-name" required disabled><br>

                    <label for="quantity">Quantity:</label>
                    <input type="number" id="quantity" required><br>

                    <label for="rate">Rate:</label>
                    <input type="number" id="rate" required><br>

                    <label for="paid-amount">Paid Amount:</label>
                    <input type="number" id="paid-amount" required><br>

                    <label for="unpaid-amount">Unpaid Amount:</label>
                    <input type="number" id="unpaid-amount" required><br>

                    <label for="total-price">Total Price:</label>
                    <input type="number" id="total-price" required><br>

                    <button type="button" id="update-btn">Update Purchase</button>
                </form>
            </div>
        </div>

        <!-- Include JS -->
        <script src="purchase.js"></script>
    </div>
</body>
</html>
