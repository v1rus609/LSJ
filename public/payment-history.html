<!DOCTYPE html>
<html>
<head>
    <title>Payment History</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.26/jspdf.plugin.autotable.min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"> <!-- Link to Font Awesome for the trash icon -->
    <link rel="stylesheet" href="payment-history.css">
</head>
<body>
    <div class="container">
        <div class="navbar">
            <a href="index.html" class="home-icon">
                <img src="home-icon.png" alt="Home" width="32">
            </a>
            <div class="dropdown">
                <button class="dropbtn">
                    <img src="menu-icon.png" alt="Menu">
                </button>
                <div class="dropdown-content">
					<a href="container.html" class="admin-only">Add Container</a>
					<a href="containers.html">Container List</a>
					<a href="buyers.html">Add Buyer</a>
					<a href="inventory.html" class="admin-only">Inventory</a>
					<a href="purchase.html">Sales History</a>
					<a href="received-payment.html" class="admin-only">Received Payment</a>
					<a href="payment-history.html"class="active">Payment History</a>
					<a href="sales-statement.html">Sales Statement</a>
					<a href="purchase-return.html"class="admin-only">Sales Return</a>
					<a href="previous-sales-return.html"class="admin-only">Previous Sales Return</a>
					<a href="return-history.html">Return History</a>
					<a href="buyer-timeline.html">Buyer Timeline</a>
					<a href="#" id="logout-btn"class="active2">Logout</a>			
                </div>
            </div>
        </div>
        
        <div class="logo">
            <img src="logo.png" alt="Company Logo">
        </div>
        
        <h1>Payment History</h1>
       
	   <div class="buyer-filter">
        <select id="buyer-filter">
            <!-- Buyer options populated dynamically -->
        </select> 
		</div>
		
        <div class="filter-and-table-container">
            <div class="filter-section">
                <label for="start-date">From:</label>
                <input type="date" id="start-date">

                <label for="end-date">To:</label>
                <input type="date" id="end-date">

                <button id="apply-date-filter">Filter</button>
            </div>

        <!-- Table Wrapper for Overflow Handling -->
        <div class="table-wrapper">
            <!-- Payment History Table -->
            <table id="payment-history-table">
                <thead>
                    <tr>
                        <th>Buyer Name</th>
                        <th>Payment Date</th>
                        <th>Particulars</th>
                        <th>Bank Amount</th>
                        <th>Cash Amount</th>
                        <th>Total</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Data will be dynamically populated -->
                </tbody>
                <tfoot>
                    <tr>
                        <th colspan="5">Total Received</th>
                        <th id="total-received">0</th>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
            <div class="export-button" style="text-align:center">
		
				   <button id="export-btn" onclick="exportToExcel()"><span class="excel-text">Export to Excel</span><i class="fas fa-file-excel"></i></button>	
		   <button id="export-pdf-btn" onclick="exportToPDF()"><span class="pdf-text">Export to PDF</span><i class="fas fa-file-pdf"></i></button>	
        </div>
		
<!-- Edit Payment Modal -->
        <div class="popup" id="edit-payment-form"style="display: none;">
            <div class="popup-content">
                <span class="close-btn" id="close-edit-btn">&times;</span><br>
                <h2>Edit Payment</h2>
<form id="edit-payment-form">
    <input type="hidden" id="payment-id">
    <label for="payment-date">Payment Date:</label>
    <input type="date" id="payment-date"><br>

<label for="buyer-name">Buyer Name:</label>
<input type="text" id="buyer-name" disabled><br>


    <label for="particulars">Particulars:</label>
    <input type="text" id="particulars"><br>

    <label for="bank-amount">Bank Amount:</label>
    <input type="number" id="bank-amount"><br>

    <label for="cash-amount">Cash Amount:</label>
    <input type="number" id="cash-amount"><br>

<label for="payment-method">Payment Method:</label>
<select id="payment-method">
    <option value="bank">Bank</option>
    <option value="cash">Cash</option>
</select><br>


    <button type="button" id="update-payment-btn">Update Payment</button>
</form>

            </div>
        </div>


        <!-- Include XLSX Library -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
        <script src="payment-history.js"></script>
    </body>
</html>
