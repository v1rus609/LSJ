<!DOCTYPE html>
<html lang="en">
<head>

    <title>Return History</title>
    <link rel="stylesheet" href="return-history.css">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"> <!-- Link to Font Awesome for the trash icon -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.26/jspdf.plugin.autotable.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.1/xlsx.full.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Navbar -->
        <div class="navbar">
            <a href="index.html" class="home-icon">
                <img src="home-icon.png" alt="Home" width="24">
            </a>
            <div class="dropdown">
                <button class="dropbtn">
                    <img src="menu-icon.png" alt="Menu" width="24">
                </button>
                <div class="dropdown-content">
					<a href="container.html" class="admin-only">Add Container</a>
					<a href="containers.html">Container List</a>
					<a href="buyers.html">Add Buyer</a>
					<a href="inventory.html" class="admin-only">Inventory</a>
					<a href="purchase.html">Sales History</a>
					<a href="received-payment.html" class="admin-only">Received Payment</a>
					<a href="payment-history.html">Payment History</a>
					<a href="sales-statement.html">Sales Statement</a>
					<a href="purchase-return.html" class="admin-only">Sales Return</a>
					<a href="previous-sales-return.html"class="admin-only">Previous Sales Return</a>
					<a href="return-history.html" class="active">Return History</a>
					<a href="buyer-timeline.html">Buyer Timeline</a>
					<a href="#" id="logout-btn"class="active2">Logout</a>

                </div>
            </div>
        </div>

        <!-- Logo -->
        <div class="logo">
            <img src="logo.png" alt="Company Logo">
        </div>

        <!-- Title -->
        <h1>Return History</h1>

        <!-- Filters Section -->
        <div class="filters">
            <!-- First Row: Buyer & Container Filters -->
            <div class="filter-row">
                <div class="form-group">
                    <label for="buyer-filter">Filter by Buyer:</label>
										                <input type="text" id="buyer-search-box" placeholder="Search Buyer by Name..." />
                    <select id="buyer-filter">
                        <option value="0">All Buyers</option>
                    </select>

                </div>

                <div class="form-group">
                    <label for="container-filter">Filter by Container:</label>
					                <input type="text" id="container-search-box" placeholder="Search Container by Number..." />
                    <select id="container-filter">
                        <option value="0">Select Container</option>
                    </select>
                </div>
            </div>

            <!-- Second Row: Start Date & End Date -->
            <div class="filter-row">
                <div class="form-group">
                    <label for="start-date">Start Date:</label>
                    <input type="date" id="start-date">
                </div>

                <div class="form-group">
                    <label for="end-date">End Date:</label>
                    <input type="date" id="end-date">
                </div>
            </div>
        </div>

        <!-- Return History Table -->
		<div class="table-wrapper">
        <table id="return-history-table">
            <thead>
                <tr>
                    <th>SL</th>
                    <th>Buyer Name</th>
                    <th>Container No</th>
                    <th>Return Date</th>
                    <th>Returned KG</th>
                    <th>Price per KG</th>
                    <th>Total Amount</th>            
					
                </tr>
            </thead>
            <tbody id="return-history-table-body">
                <!-- Table rows will be dynamically inserted here -->
            </tbody>
			 <tfoot>
            <tr id="total-row">
                <!-- Total calculations will be dynamically inserted here -->
            </tr>
			 </tfoot>
        </table>
		</div>
	    <div class="export-button" style="text-align:center">
		<button id="export-excel-return-history">Export Excel</button>
		   <button id="export-pdf-btn" onclick="exportToPDF()">Export to PDF</button>	
        </div>

    </div>
<!-- Edit Return Modal Form -->
<div id="edit-return-form" class="popup" id="edit-return-form" style="display: none;">
    <div class="popup-content">
        <span id="close-edit-btn" class="close-btn">&times;</span>
        <h2>Return Record</h2>
        <form id="return-form">
            <input type="hidden" id="return-id"> <!-- Hidden field for ID -->

            <!-- Buyer Name (set by backend using buyer_id) -->
            <label for="buyer-name">Buyer Name:</label><br>
            <input type="text" id="buyer-name" disabled><br><br> <!-- Display buyer's name, disabled for editing -->

            <!-- Container Name (set by backend using container_id) -->
            <label for="container-name">Container No:</label><br>
            <input type="text" id="container-name" disabled><br><br> <!-- Display container name, disabled for editing -->

            <!-- Return Date -->
            <label for="return-date">Return Date:</label><br>
            <input type="date" id="return-date" required><br><br>

            <!-- Returned KG -->
            <label for="returned-kg">Returned KG:</label><br>
            <input type="number" id="returned-kg" required><br><br>

            <!-- Price per KG -->
            <label for="returned-price-per-kg">Price per KG:</label><br>
            <input type="number" id="returned-price-per-kg" required><br><br>

            <!-- Total Amount -->
            <label for="total-amount">Total Amount:</label><br>
            <input type="number" id="total-amount" required><br><br>

            <!-- Update Button -->
            <button type="submit" id="update-return-btn">Update Return</button>
        </form>
    </div>
</div>




    <script src="return-history.js"></script> <!-- Link to JavaScript file -->
</body>
</html>