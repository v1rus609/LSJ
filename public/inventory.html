
<!DOCTYPE html>
<html>
<head>
    <title>Sell Inventory</title>
    <link rel="stylesheet" href="inventory.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"> <!-- Link to Font Awesome for the trash icon -->
</head>
<body>
    <form id="sell-form">
		<div class="navbar">
		<a href="index.html" class="home-icon">
                <img src="home-icon.png" alt="Home" width="32">
		</a>
		<div class="dropdown">
			<button class="dropbtn">
				<img src="menu-icon.png" alt="Menu">
			</button>
			<div class="dropdown-content">
 			<a href="container.html">Add Container</a>
			<a href="containers.html">Container List</a>
			<a href="buyers.html">Add Buyer</a>
			<a href="inventory.html"class="active">Inventory</a>
			<a href="purchase.html">Sales History</a>
			<a href="received-payment.html">Received Payment</a>
			<a href="payment-history.html">Payment History</a>
			<a href="sales-statement.html">Sales Statement</a>
			<a href="purchase-return.html">Sales Return</a>
			<a href="previous-sales-return.html">Previous Sales Return</a>
			<a href="return-history.html"> Return History </a>
			<a href="buyer-timeline.html"> Buyer Timeline </a>
			<a href="#" id="logout-btn"class="active2">Logout</a>
			</div>
		</div>
	</div>
	<div class="logo">
        <img src="logo.png" alt="Company Logo">
    </div>
	<h1>Sell Inventory</h1>
	
		<label for="buyer-search">Search Buyer:</label><br>
		<input type="text" id="buyer-search" placeholder="Search Buyer..." autocomplete="off"><br><br>
        <!-- Select Buyer -->
        <label>Select Buyer:</label><br>
        <select name="buyer_id" id="buyer-dropdown" required>
            <option value="">Select a Buyer</option>
        </select><br><br>

        <!-- Purchase Date -->
        <label>Purchase Date:</label><br>
        <input type="date" name="purchase_date" id="purchase-date" required><br><br>

<!-- Container Section -->
<div id="container-section">
    <div class="container-group">
        <label>Bill No.:</label><br>
        <input type="text" name="bill_no[]" id="bill-no" value="Bill No:" autocomplete="off" required><br><br>


        <label>Select Container:</label><br>
        <input type="text" class="container-search" placeholder="Search Container..."><br><br>
        <select name="container_id[]" class="container-dropdown" required>
            <option value="">Select a Container</option>
        </select><br><br>

        <label>Weight Sold (KG):</label><br>
        <input type="text" name="weight_sold[]" class="weight-sold" step="0.01" autocomplete="off" required><br><br>

        <label>Price Per KG:</label><br>
        <input type="text" name="price_per_kg[]" class="price-per-kg" step="0.01" autocomplete="off" required><br><br>

        <label>Paid Amount (For This Container):</label><br>
        <input type="text" name="paid_amount[]" class="paid-amount" step="0.01" value="0" autocomplete="off" required><br><br>

        <label>Unpaid Amount (For This Container):</label><br>
        <input type="text" name="unpaid_amount[]" class="unpaid-amount" readonly><br><br>

        <button class="add-container"><span class="truck-text">Add Container</span><i class="fas fa-truck"></i></button>
        <button class="remove-container"><span class="delete-text">Remove</span><i class="fas fa-trash-alt"></i></button><br><br>
    </div>
</div>


        <!-- Total Price -->
        <label>Total Price:</label><br>
        <input type="text" id="total-price" name="total_price" readonly><br><br>

        <button type="submit">Sell</button>
    </form>

    <!-- Success Message Popup -->
    <div id="success-popup" style="display: none;">
        Success! Product Sold
    </div>

    <script src="inventory.js"></script>
		    <script>
        // Ensure the user is logged in
    // Ensure the user is logged in and has the appropriate role
    fetch('/check-role')
        .then(response => response.json())  // Parse JSON response from server
        .then(data => {
            if (!data.loggedIn) {
                window.location.href = '/login.html'; // Redirect to login page if not logged in
            } else {
                // Check if the logged-in user is an Admin
                if (data.role !== 'Admin') {
                    // If the user is not an Admin, redirect to index.html
                    window.location.href = '/index.html';
                }
            }
        })
        .catch(error => {
            console.error('Error checking user role:', error);
            window.location.href = '/login.html'; // Redirect to login if error occurs
        });

    </script>
	
</body>
</html>